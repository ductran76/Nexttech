if(typeof JSON!=="object"){JSON={}}(function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];if(a&&typeof a==="object"&&typeof a.toJSON==="function"){a=a.toJSON(e)}if(typeof rep==="function"){a=rep.call(t,e,a)}switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a){return"null"}gap+=indent;u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1){u[n]=str(n,a)||"null"}i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]";gap=o;return i}if(rep&&typeof rep==="object"){s=rep.length;for(n=0;n<s;n+=1){if(typeof rep[n]==="string"){r=rep[n];i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}else{for(r in a){if(Object.prototype.hasOwnProperty.call(a,r)){i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}";gap=o;return i}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if(typeof JSON.stringify!=="function"){JSON.stringify=function(e,t,n){var r;gap="";indent="";if(typeof n==="number"){for(r=0;r<n;r+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i==="object"){for(n in i){if(Object.prototype.hasOwnProperty.call(i,n)){r=walk(i,n);if(r!==undefined){i[n]=r}else{delete i[n]}}}}return reviver.call(e,t,i)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();(function(e,t){"use strict";var n=e.History=e.History||{},r=e.jQuery;if(typeof n.Adapter!=="undefined"){throw new Error("History.js Adapter has already been loaded...")}n.Adapter={bind:function(e,t,n){r(e).bind(t,n)},trigger:function(e,t,n){r(e).trigger(t,n)},extractEventData:function(e,n,r){var i=n&&n.originalEvent&&n.originalEvent[e]||r&&r[e]||t;return i},onDomLoad:function(e){r(e)}};if(typeof n.init!=="undefined"){n.init()}})(window);(function(e,t){"use strict";var n=e.document,r=e.setTimeout||r,i=e.clearTimeout||i,s=e.setInterval||s,o=e.History=e.History||{};if(typeof o.initHtml4!=="undefined"){throw new Error("History.js HTML4 Support has already been loaded...")}o.initHtml4=function(){if(typeof o.initHtml4.initialized!=="undefined"){return false}else{o.initHtml4.initialized=true}o.enabled=true;o.savedHashes=[];o.isLastHash=function(e){var t=o.getHashByIndex(),n;n=e===t;return n};o.isHashEqual=function(e,t){e=encodeURIComponent(e).replace(/%25/g,"%");t=encodeURIComponent(t).replace(/%25/g,"%");return e===t};o.saveHash=function(e){if(o.isLastHash(e)){return false}o.savedHashes.push(e);return true};o.getHashByIndex=function(e){var t=null;if(typeof e==="undefined"){t=o.savedHashes[o.savedHashes.length-1]}else if(e<0){t=o.savedHashes[o.savedHashes.length+e]}else{t=o.savedHashes[e]}return t};o.discardedHashes={};o.discardedStates={};o.discardState=function(e,t,n){var r=o.getHashByState(e),i;i={discardedState:e,backState:n,forwardState:t};o.discardedStates[r]=i;return true};o.discardHash=function(e,t,n){var r={discardedHash:e,backState:n,forwardState:t};o.discardedHashes[e]=r;return true};o.discardedState=function(e){var t=o.getHashByState(e),n;n=o.discardedStates[t]||false;return n};o.discardedHash=function(e){var t=o.discardedHashes[e]||false;return t};o.recycleState=function(e){var t=o.getHashByState(e);if(o.discardedState(e)){delete o.discardedStates[t]}return true};if(o.emulated.hashChange){o.hashChangeInit=function(){o.checkerFunction=null;var t="",r,i,u,a,f=Boolean(o.getHash());if(o.isInternetExplorer()){r="historyjs-iframe";i=n.createElement("iframe");i.setAttribute("id",r);i.setAttribute("src","#");i.style.display="none";n.body.appendChild(i);i.contentWindow.document.open();i.contentWindow.document.close();u="";a=false;o.checkerFunction=function(){if(a){return false}a=true;var n=o.getHash(),r=o.getHash(i.contentWindow.document);if(n!==t){t=n;if(r!==n){u=r=n;i.contentWindow.document.open();i.contentWindow.document.close();i.contentWindow.document.location.hash=o.escapeHash(n)}o.Adapter.trigger(e,"hashchange")}else if(r!==u){u=r;if(f&&r===""){o.back()}else{o.setHash(r,false)}}a=false;return true}}else{o.checkerFunction=function(){var n=o.getHash()||"";if(n!==t){t=n;o.Adapter.trigger(e,"hashchange")}return true}}o.intervalList.push(s(o.checkerFunction,o.options.hashChangeInterval));return true};o.Adapter.onDomLoad(o.hashChangeInit)}if(o.emulated.pushState){o.onHashChange=function(t){var n=t&&t.newURL||o.getLocationHref(),r=o.getHashByUrl(n),i=null,s=null,u=null,a;if(o.isLastHash(r)){o.busy(false);return false}o.doubleCheckComplete();o.saveHash(r);if(r&&o.isTraditionalAnchor(r)){o.Adapter.trigger(e,"anchorchange");o.busy(false);return false}i=o.extractState(o.getFullUrl(r||o.getLocationHref()),true);if(o.isLastSavedState(i)){o.busy(false);return false}s=o.getHashByState(i);a=o.discardedState(i);if(a){if(o.getHashByIndex(-2)===o.getHashByState(a.forwardState)){o.back(false)}else{o.forward(false)}return false}o.pushState(i.data,i.title,encodeURI(i.url),false);return true};o.Adapter.bind(e,"hashchange",o.onHashChange);o.pushState=function(t,n,r,i){r=encodeURI(r).replace(/%25/g,"%");if(o.getHashByUrl(r)){throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).")}if(i!==false&&o.busy()){o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:i});return false}o.busy(true);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(false),f=o.getHashByState(a),l=o.getHash(),c=o.expectedStateId==s.id;o.storeState(s);o.expectedStateId=s.id;o.recycleState(s);o.setTitle(s);if(u===f){o.busy(false);return false}o.saveState(s);if(!c)o.Adapter.trigger(e,"statechange");if(!o.isHashEqual(u,l)&&!o.isHashEqual(u,o.getShortUrl(o.getLocationHref()))){o.setHash(u,false)}o.busy(false);return true};o.replaceState=function(t,n,r,i){r=encodeURI(r).replace(/%25/g,"%");if(o.getHashByUrl(r)){throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).")}if(i!==false&&o.busy()){o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:i});return false}o.busy(true);var s=o.createStateObject(t,n,r),u=o.getHashByState(s),a=o.getState(false),f=o.getHashByState(a),l=o.getStateByIndex(-2);o.discardState(a,s,l);if(u===f){o.storeState(s);o.expectedStateId=s.id;o.recycleState(s);o.setTitle(s);o.saveState(s);o.Adapter.trigger(e,"statechange");o.busy(false)}else{o.pushState(s.data,s.title,s.url,false)}return true}}if(o.emulated.pushState){if(o.getHash()&&!o.emulated.hashChange){o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")})}}};if(typeof o.init!=="undefined"){o.init()}})(window);(function(e,t){"use strict";var n=e.console||t,r=e.document,i=e.navigator,s=false,o=e.setTimeout,u=e.clearTimeout,a=e.setInterval,f=e.clearInterval,l=e.JSON,c=e.alert,h=e.History=e.History||{},p=e.history;try{s=e.sessionStorage;s.setItem("TEST","1");s.removeItem("TEST")}catch(d){s=false}l.stringify=l.stringify||l.encode;l.parse=l.parse||l.decode;if(typeof h.init!=="undefined"){throw new Error("History.js Core has already been loaded...")}h.init=function(e){if(typeof h.Adapter==="undefined"){return false}if(typeof h.initCore!=="undefined"){h.initCore()}if(typeof h.initHtml4!=="undefined"){h.initHtml4()}return true};h.initCore=function(d){if(typeof h.initCore.initialized!=="undefined"){return false}else{h.initCore.initialized=true}h.options=h.options||{};h.options.hashChangeInterval=h.options.hashChangeInterval||100;h.options.safariPollInterval=h.options.safariPollInterval||500;h.options.doubleCheckInterval=h.options.doubleCheckInterval||500;h.options.disableSuid=h.options.disableSuid||false;h.options.storeInterval=h.options.storeInterval||1e3;h.options.busyDelay=h.options.busyDelay||250;h.options.debug=h.options.debug||false;h.options.initialTitle=h.options.initialTitle||r.title;h.options.html4Mode=h.options.html4Mode||false;h.options.delayInit=h.options.delayInit||false;h.intervalList=[];h.clearAllIntervals=function(){var e,t=h.intervalList;if(typeof t!=="undefined"&&t!==null){for(e=0;e<t.length;e++){f(t[e])}h.intervalList=null}};h.debug=function(){if(h.options.debug||false){h.log.apply(h,arguments)}};h.log=function(){var e=!(typeof n==="undefined"||typeof n.log==="undefined"||typeof n.log.apply==="undefined"),t=r.getElementById("log"),i,s,o,u,a;if(e){u=Array.prototype.slice.call(arguments);i=u.shift();if(typeof n.debug!=="undefined"){n.debug.apply(n,[i,u])}else{n.log.apply(n,[i,u])}}else{i="\n"+arguments[0]+"\n"}for(s=1,o=arguments.length;s<o;++s){a=arguments[s];if(typeof a==="object"&&typeof l!=="undefined"){try{a=l.stringify(a)}catch(f){}}i+="\n"+a+"\n"}if(t){t.value+=i+"\n-----\n";t.scrollTop=t.scrollHeight-t.clientHeight}else if(!e){c(i)}return true};h.getInternetExplorerMajorVersion=function(){var e=h.getInternetExplorerMajorVersion.cached=typeof h.getInternetExplorerMajorVersion.cached!=="undefined"?h.getInternetExplorerMajorVersion.cached:function(){var e=3,t=r.createElement("div"),n=t.getElementsByTagName("i");while((t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0]){}return e>4?e:false}();return e};h.isInternetExplorer=function(){var e=h.isInternetExplorer.cached=typeof h.isInternetExplorer.cached!=="undefined"?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion());return e};if(h.options.html4Mode){h.emulated={pushState:true,hashChange:true}}else{h.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)}}h.enabled=!h.emulated.pushState;h.bugs={setHash:Boolean(!h.emulated.pushState&&i.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&i.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)};h.isEmptyObject=function(e){for(var t in e){if(e.hasOwnProperty(t)){return false}}return true};h.cloneObject=function(e){var t,n;if(e){t=l.stringify(e);n=l.parse(t)}else{n={}}return n};h.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);if(r.location.port||false){e+=":"+r.location.port}e+="/";return e};h.getBaseHref=function(){var e=r.getElementsByTagName("base"),t=null,n="";if(e.length===1){t=e[0];n=t.href.replace(/[^\/]+$/,"")}n=n.replace(/\/+$/,"");if(n)n+="/";return n};h.getBaseUrl=function(){var e=h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl();return e};h.getPageUrl=function(){var e=h.getState(false,false),t=(e||{}).url||h.getLocationHref(),n;n=t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"});return n};h.getBasePageUrl=function(){var e=h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e};h.getFullUrl=function(e,t){var n=e,r=e.substring(0,1);t=typeof t==="undefined"?true:t;if(/[a-z]+\:\/\//.test(e)){}else if(r==="/"){n=h.getRootUrl()+e.replace(/^\/+/,"")}else if(r==="#"){n=h.getPageUrl().replace(/#.*/,"")+e}else if(r==="?"){n=h.getPageUrl().replace(/[\?#].*/,"")+e}else{if(t){n=h.getBaseUrl()+e.replace(/^(\.\/)+/,"")}else{n=h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")}}return n.replace(/\#$/,"")};h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),r=h.getRootUrl();if(h.emulated.pushState){t=t.replace(n,"")}t=t.replace(r,"/");if(h.isTraditionalAnchor(t)){t="./"+t}t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"");return t};h.getLocationHref=function(e){e=e||r;if(e.URL===e.location.href)return e.location.href;if(e.location.href===decodeURIComponent(e.URL))return e.URL;if(e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash)return e.location.href;if(e.URL.indexOf("#")==-1&&e.location.href.indexOf("#")!=-1)return e.location.href;return e.URL||e.location.href};h.store={};h.idToState=h.idToState||{};h.stateToId=h.stateToId||{};h.urlToId=h.urlToId||{};h.storedStates=h.storedStates||[];h.savedStates=h.savedStates||[];h.normalizeStore=function(){h.store.idToState=h.store.idToState||{};h.store.urlToId=h.store.urlToId||{};h.store.stateToId=h.store.stateToId||{}};h.getState=function(e,t){if(typeof e==="undefined"){e=true}if(typeof t==="undefined"){t=true}var n=h.getLastSavedState();if(!n&&t){n=h.createStateObject()}if(e){n=h.cloneObject(n);n.url=n.cleanUrl||n.url}return n};h.getIdByState=function(e){var t=h.extractId(e.url),n;if(!t){n=h.getStateString(e);if(typeof h.stateToId[n]!=="undefined"){t=h.stateToId[n]}else if(typeof h.store.stateToId[n]!=="undefined"){t=h.store.stateToId[n]}else{while(true){t=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof h.idToState[t]==="undefined"&&typeof h.store.idToState[t]==="undefined"){break}}h.stateToId[n]=t;h.idToState[t]=e}}return t};h.normalizeState=function(e){var t,n;if(!e||typeof e!=="object"){e={}}if(typeof e.normalized!=="undefined"){return e}if(!e.data||typeof e.data!=="object"){e.data={}}t={};t.normalized=true;t.title=e.title||"";t.url=h.getFullUrl(e.url?e.url:h.getLocationHref());t.hash=h.getShortUrl(t.url);t.data=h.cloneObject(e.data);t.id=h.getIdByState(t);t.cleanUrl=t.url.replace(/\??\&_suid.*/,"");t.url=t.cleanUrl;n=!h.isEmptyObject(t.data);if((t.title||n)&&h.options.disableSuid!==true){t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,"");if(!/\?/.test(t.hash)){t.hash+="?"}t.hash+="&_suid="+t.id}t.hashedUrl=h.getFullUrl(t.hash);if((h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)){t.url=t.hashedUrl}return t};h.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};r=h.normalizeState(r);return r};h.getStateById=function(e){e=String(e);var n=h.idToState[e]||h.store.idToState[e]||t;return n};h.getStateString=function(e){var t,n,r;t=h.normalizeState(e);n={data:t.data,title:e.title,url:e.url};r=l.stringify(n);return r};h.getStateId=function(e){var t,n;t=h.normalizeState(e);n=t.id;return n};h.getHashByState=function(e){var t,n;t=h.normalizeState(e);n=t.hash;return n};h.extractId=function(e){var t,n,r,i;if(e.indexOf("#")!=-1){i=e.split("#")[0]}else{i=e}n=/(.*)\&_suid=([0-9]+)$/.exec(i);r=n?n[1]||e:e;t=n?String(n[2]||""):"";return t||false};h.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t};h.extractState=function(e,t){var n=null,r,i;t=t||false;r=h.extractId(e);if(r){n=h.getStateById(r)}if(!n){i=h.getFullUrl(e);r=h.getIdByUrl(i)||false;if(r){n=h.getStateById(r)}if(!n&&t&&!h.isTraditionalAnchor(e)){n=h.createStateObject(null,null,i)}}return n};h.getIdByUrl=function(e){var n=h.urlToId[e]||h.store.urlToId[e]||t;return n};h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||t};h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||t};h.hasUrlDuplicate=function(e){var t=false,n;n=h.extractState(e.url);t=n&&n.id!==e.id;return t};h.storeState=function(e){h.urlToId[e.url]=e.id;h.storedStates.push(h.cloneObject(e));return e};h.isLastSavedState=function(e){var t=false,n,r,i;if(h.savedStates.length){n=e.id;r=h.getLastSavedState();i=r.id;t=n===i}return t};h.saveState=function(e){if(h.isLastSavedState(e)){return false}h.savedStates.push(h.cloneObject(e));return true};h.getStateByIndex=function(e){var t=null;if(typeof e==="undefined"){t=h.savedStates[h.savedStates.length-1]}else if(e<0){t=h.savedStates[h.savedStates.length+e]}else{t=h.savedStates[e]}return t};h.getCurrentIndex=function(){var e=null;if(h.savedStates.length<1){e=0}else{e=h.savedStates.length-1}return e};h.getHash=function(e){var t=h.getLocationHref(e),n;n=h.getHashByUrl(t);return n};h.unescapeHash=function(e){var t=h.normalizeHash(e);t=decodeURIComponent(t);return t};h.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t};h.setHash=function(e,t){var n,i;if(t!==false&&h.busy()){h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t});return false}h.busy(true);n=h.extractState(e,true);if(n&&!h.emulated.pushState){h.pushState(n.data,n.title,n.url,false)}else if(h.getHash()!==e){if(h.bugs.setHash){i=h.getPageUrl();h.pushState(null,null,i+"#"+e,false)}else{r.location.hash=e}}return h};h.escapeHash=function(t){var n=h.normalizeHash(t);n=e.encodeURIComponent(n);if(!h.bugs.hashEscape){n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")}return n};h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");t=h.unescapeHash(t);return t};h.setTitle=function(e){var t=e.title,n;if(!t){n=h.getStateByIndex(0);if(n&&n.url===e.url){t=n.title||h.options.initialTitle}}try{r.getElementsByTagName("title")[0].innerHTML=t.replace("<","&lt;").replace(">","&gt;").replace(" & "," & ")}catch(i){}r.title=t;return h};h.queues=[];h.busy=function(e){if(typeof e!=="undefined"){h.busy.flag=e}else if(typeof h.busy.flag==="undefined"){h.busy.flag=false}if(!h.busy.flag){u(h.busy.timeout);var t=function(){var e,n,r;if(h.busy.flag)return;for(e=h.queues.length-1;e>=0;--e){n=h.queues[e];if(n.length===0)continue;r=n.shift();h.fireQueueItem(r);h.busy.timeout=o(t,h.options.busyDelay)}};h.busy.timeout=o(t,h.options.busyDelay)}return h.busy.flag};h.busy.flag=false;h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])};h.pushQueue=function(e){h.queues[e.queue||0]=h.queues[e.queue||0]||[];h.queues[e.queue||0].push(e);return h};h.queue=function(e,t){if(typeof e==="function"){e={callback:e}}if(typeof t!=="undefined"){e.queue=t}if(h.busy()){h.pushQueue(e)}else{h.fireQueueItem(e)}return h};h.clearQueue=function(){h.busy.flag=false;h.queues=[];return h};h.stateChanged=false;h.doubleChecker=false;h.doubleCheckComplete=function(){h.stateChanged=true;h.doubleCheckClear();return h};h.doubleCheckClear=function(){if(h.doubleChecker){u(h.doubleChecker);h.doubleChecker=false}return h};h.doubleCheck=function(e){h.stateChanged=false;h.doubleCheckClear();if(h.bugs.ieDoubleCheck){h.doubleChecker=o(function(){h.doubleCheckClear();if(!h.stateChanged){e()}return true},h.options.doubleCheckInterval)}return h};h.safariStatePoll=function(){var t=h.extractState(h.getLocationHref()),n;if(!h.isLastSavedState(t)){n=t}else{return}if(!n){n=h.createStateObject()}h.Adapter.trigger(e,"popstate");return h};h.back=function(e){if(e!==false&&h.busy()){h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e});return false}h.busy(true);h.doubleCheck(function(){h.back(false)});p.go(-1);return true};h.forward=function(e){if(e!==false&&h.busy()){h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e});return false}h.busy(true);h.doubleCheck(function(){h.forward(false)});p.go(1);return true};h.go=function(e,t){var n;if(e>0){for(n=1;n<=e;++n){h.forward(t)}}else if(e<0){for(n=-1;n>=e;--n){h.back(t)}}else{throw new Error("History.go: History.go requires a positive or negative integer passed.")}return h};if(h.emulated.pushState){var v=function(){};h.pushState=h.pushState||v;h.replaceState=h.replaceState||v}else{h.onPopState=function(t,n){var r=false,i=false,s,o;h.doubleCheckComplete();s=h.getHash();if(s){o=h.extractState(s||h.getLocationHref(),true);if(o){h.replaceState(o.data,o.title,o.url,false)}else{h.Adapter.trigger(e,"anchorchange");h.busy(false)}h.expectedStateId=false;return false}r=h.Adapter.extractEventData("state",t,n)||false;if(r){i=h.getStateById(r)}else if(h.expectedStateId){i=h.getStateById(h.expectedStateId)}else{i=h.extractState(h.getLocationHref())}if(!i){i=h.createStateObject(null,null,h.getLocationHref())}h.expectedStateId=false;if(h.isLastSavedState(i)){h.busy(false);return false}h.storeState(i);h.saveState(i);h.setTitle(i);h.Adapter.trigger(e,"statechange");h.busy(false);return true};h.Adapter.bind(e,"popstate",h.onPopState);h.pushState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(i!==false&&h.busy()){h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:i});return false}h.busy(true);var s=h.createStateObject(t,n,r);if(h.isLastSavedState(s)){h.busy(false)}else{h.storeState(s);h.expectedStateId=s.id;p.pushState(s.id,s.title,s.url);h.Adapter.trigger(e,"popstate")}return true};h.replaceState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(i!==false&&h.busy()){h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:i});return false}h.busy(true);var s=h.createStateObject(t,n,r);if(h.isLastSavedState(s)){h.busy(false)}else{h.storeState(s);h.expectedStateId=s.id;p.replaceState(s.id,s.title,s.url);h.Adapter.trigger(e,"popstate")}return true}}if(s){try{h.store=l.parse(s.getItem("History.store"))||{}}catch(m){h.store={}}h.normalizeStore()}else{h.store={};h.normalizeStore()}h.Adapter.bind(e,"unload",h.clearAllIntervals);h.saveState(h.storeState(h.extractState(h.getLocationHref(),true)));if(s){h.onUnload=function(){var e,t,n;try{e=l.parse(s.getItem("History.store"))||{}}catch(r){e={}}e.idToState=e.idToState||{};e.urlToId=e.urlToId||{};e.stateToId=e.stateToId||{};for(t in h.idToState){if(!h.idToState.hasOwnProperty(t)){continue}e.idToState[t]=h.idToState[t]}for(t in h.urlToId){if(!h.urlToId.hasOwnProperty(t)){continue}e.urlToId[t]=h.urlToId[t]}for(t in h.stateToId){if(!h.stateToId.hasOwnProperty(t)){continue}e.stateToId[t]=h.stateToId[t]}h.store=e;h.normalizeStore();n=l.stringify(e);try{s.setItem("History.store",n)}catch(i){if(i.code===DOMException.QUOTA_EXCEEDED_ERR){if(s.length){s.removeItem("History.store");s.setItem("History.store",n)}else{}}else{throw i}}};h.intervalList.push(a(h.onUnload,h.options.storeInterval));h.Adapter.bind(e,"beforeunload",h.onUnload);h.Adapter.bind(e,"unload",h.onUnload)}if(!h.emulated.pushState){if(h.bugs.safariPoll){h.intervalList.push(a(h.safariStatePoll,h.options.safariPollInterval))}if(i.vendor==="Apple Computer, Inc."||(i.appCodeName||"")==="Mozilla"){h.Adapter.bind(e,"hashchange",function(){h.Adapter.trigger(e,"popstate")});if(h.getHash()){h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,"hashchange")})}}}};if(!h.options||!h.options.delayInit){h.init()}})(window)